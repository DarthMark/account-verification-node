<!DOCTYPE html><html><head><title>Account Verification</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Account Verification"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Account Verification</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Learn to implement account verification in your web app with Twilio-powered Authy. Account verification helps you ensure your customer data is accurate and secure. This tutorial will show you the code to make it happen.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Register a User" class="chapter"><div data-title="Introduction" class="step"><h2 id="user-account-verification">User Account Verification</h2>
<p>Ready to implement user account verification in your application? Here&#39;s how it works at a high level:</p>
<ol>
<li><p>The user begins the registration process by entering their data, including a phone number, into a signup form</p>
</li>
<li><p>The authentication system sends a one-time password to the user&#39;s mobile phone to verify their possession of that phone number</p>
</li>
<li><p>The user enters the one-time password into a form before completing registeration</p>
</li>
<li><p>The user sees a success page and receives an SMS indicating that their account has been created</p>
</li>
</ol>
<h2 id="building-blocks">Building Blocks</h2>
<p>To get this done, you&#39;ll be working with the following Twilio-powered APIs:</p>
<p><strong>Authy REST API</strong></p>
<ul>
<li><a href="https://docs.authy.com/#section-Enabling_two-factor_on_a_user">Users Resource</a>: You will need to create Authy users to send and verify one-time passwords with them.</li>
<li><a href="https://docs.authy.com/#section-Text_Messages">SMS Resource</a>: We will ask Authy to send one-time passwords to our user via SMS</li>
<li><a href="https://docs.authy.com/#section-Verifying_a_token">Verify Resource</a>: Used to verify tokens entered by the user in our web form during registration</li>
</ul>
<p><strong>Twilio REST API</strong></p>
<ul>
<li><a href="/docs/api/rest/sending-sms">Messages Resource</a>: We will use Twilio directly to send our user a confirmation message after they create an account</li>
</ul>
<p>Let&#39;s get started! Click the right arrow to move on to the next step of the tutorial.</p>
</div><div data-title="About This Tutorial" class="step"><h2 id="about-this-tutorial">About This Tutorial</h2>
<p>In this tutorial, we will be working through a series of <a href="http://en.wikipedia.org/wiki/User_story">user stories</a> that describe how to fully implement account verification in a web application. Our team implemented this example application in about 12 story points (roughly equivalent to 12 working hours).</p>
<p>Let&#39;s get started with our first user story around creating a new user account.</p>
</div><div data-title="Registering a User Account" data-file="models/User.js" data-highlight="" class="step"><h2>User Story: Registering an Account</h2><blockquote>As a user, I want to register for a new user account with my e-mail, full name, mobile phone number, and a password.</blockquote><p>To do account verification, you definitely need to start with an account! This story requires that we create a bit of UI and a model object to create and save a new <code>User</code> in our system. At a high level, here&#39;s what we will need to add:</p>
<ul>
<li>A form to enter details about the new user</li>
<li>A route and controller function on the server to render the form</li>
<li>A route and controller function on the server to handle the form POST request</li>
<li>A persistent <code>User</code> model object to store information about the user</li>
</ul>
<p>Let&#39;s begin looking at the implementation for this story at the model level, where we decide what information we want to store about our user.</p>
</div><div data-title="Registering a User Account" data-file="models/User.js" data-highlight="12-40" class="step"><h2 id="defining-the-user-model">Defining the User Model</h2>
<p>Our first order of business is to create a model object for a user of our application. We will borrow a lot of the code from the <code>User</code> model in the <a href="/docs/howto/walkthrough/two-factor-authentication/node/express">2FA tutorial</a> that uses Authy as well. This application uses <a href="http://www.mongodb.com/">MongoDB</a> for persistence, but in our code we will primarily interface with <a href="http://mongoosejs.com/">Mongoose</a>, a higher-level object modeling tool which is backed by MongoDB.</p>
<p>You define the properties of a model object in Mongoose with a <a href="http://mongoosejs.com/docs/guide.html">Schema</a>. To satisfy this user story, we need to add a few properties to this model, like an e-mail address, full name, and a Boolean flag indicating whether or not this account has been verified.  When you create a Mongoose <a href="http://mongoosejs.com/docs/models.html">Model</a> based on this schema, that model object will allow you to create, save, and delete objects with this set of properties.</p>
<p>You&#39;ll notice an <code>authyId</code> property on the model - <a href="https://docs.authy.com/#section-Enabling_two-factor_on_a_user">this is required to support integration with the Authy API</a>. We won&#39;t use this property right away, but we&#39;ll need it later for the Authy integration.</p>
<p>One of the properties on the <code>User</code> model, per the user story, is a password (we&#39;ll probably want that later to log a user in, even though it&#39;s not in scope for this tutorial). Since passwords are sensitive data, they require some special handling - let&#39;s look at how to do that next.</p>
</div><div data-title="Dealing with Passwords" data-file="models/User.js" data-highlight="42-62" class="step"><h2 id="dealing-with-passwords">Dealing with Passwords</h2>
<p>You never want to store a user&#39;s password in clear text in the database. Before writing the password to MongoDB, we need to hash that value.</p>
<p>A decent place to handle that step in a Mongoose model is a <a href="http://mongoosejs.com/docs/middleware.html">middleware function</a> that executes before the model is saved, as you see here.</p>
<p>That&#39;s all we really need at the model level for now - we just need to be able to create and save a new User model, without storing the password in clear text.</p>
<p>Now we&#39;re ready to move up to the controller level of the application, starting with the HTTP request routes I&#39;ll need.</p>
</div><div data-title="Adding New Routes" data-file="controllers/router.js" data-highlight="9-11" class="step"><h2 id="adding-new-routes">Adding New Routes</h2>
<p>In an <a href="http://expressjs.com/">Express</a> application, you define JavaScript functions to handle HTTP requests to different URLS (routes) in your application. Here, we add a route for a <code>GET</code> request to render the new user form, and a <code>POST</code> route to handle the form submission.</p>
<p>The router delegates the actual handling of these routes to a separate controller module - let&#39;s peek at that next.</p>
</div><div data-title="Rendering the New User Form" data-file="controllers/users.js" data-highlight="3-10" class="step"><h2 id="rendering-the-new-user-form">Rendering the New User Form</h2>
<p>This function will handle a request to render the sign-up form for the application. We generate the HTML for this form using a <a href="http://jade-lang.com">Jade template</a>. This and all the other HTML templates for the application are found in the <code>views</code> directory at the top level of the project. We render the template with some context data to insert into it, including any <a href="https://github.com/jaredhanson/connect-flash">flash</a> messages that might be present after an HTTP redirect.</p>
<p>Let&#39;s go over the Jade template for the form next.</p>
</div><div data-title="The Form Template" data-file="views/users/create.jade" data-language="jade" class="step"><h2 id="the-form-template">The Form Template</h2>
<p>This is the Jade template used to render the sign-up form. It <a href="http://jade-lang.com/reference/inheritance/">extends the layout</a> that already existed in the <a href="https://github.com/TwilioDevEd/starter-node-express">starter project we forked to create this app</a>, so I can insert content, styles, and scripts specific to this page.</p>
<p>To create a nice country code dropdown menu for the user&#39;s mobile phone, we include CSS and JavaScript for <a href="https://github.com/authy/authy-form-helpers">Authy&#39;s form helpers</a>. We also include a tiny bit of JavaScript to reset the <a href="http://getbootstrap.com/">Bootstrap</a> styles we&#39;re using on the country code form field after Authy changes it. Otherwise it doesn&#39;t quite match the rest of the form.</p>
<p>Other than that, we have a pretty standard HTML form which submits a <code>POST</code> request to the <code>/user</code> route we set up earlier. Let&#39;s jump back down to the controller for the last step of implementing this user story, which is creating the user from these form inputs.</p>
</div><div data-title="Creating the User" data-file="controllers/users.js" data-highlight="12-50" class="step"><h2 id="creating-the-user">Creating the User</h2>
<p>Back on the server, we create a new instance of a <code>User</code> model from the form data submitted by the user. If there&#39;s an error when we save the user, we need to store a flash message on the session and redirect back to the form so the user can try again.</p>
<p>If the <code>User</code> is saved successfully, then we&#39;re all set for this user story! Of course, there&#39;s more going on inside this controller function after the user is saved, but all that code is added as a part of our next user story. Let&#39;s check that out right now!</p>
</div></div><div data-title="Send a One-Time Code" class="chapter"></div><div data-title="Sending a One-Time Password" data-file="config.js" class="step"><h2>User Story: Sending a One-Time Password</h2><blockquote>As an authentication system, I want to send a one-time password to a user's mobile phone to verify their possession of that phone number.</blockquote><p>This story covers a process that is invisible to the end user but necessary to power our account verification functionality. After a new user is created, the application needs to send a one-time password to that user&#39;s phone to validate the number (and the account). Here&#39;s what needs to get done:</p>
<ul>
<li>Create and configure an Authy API client</li>
<li>Modify the controller to send a one-time password after the user is created</li>
<li>Add an instance method to the <code>User</code> model to send a one-time password, using Authy, to the phone number associated with it</li>
</ul>
<p>Let&#39;s begin by modifying the app&#39;s configuration to contain our Authy API key.</p>
</div><div data-title="Configuring Authy" data-file="config.js" data-highlight="24-26" class="step"><h2 id="configuring-authy">Configuring Authy</h2>
<p>In <code>config.js</code>, we list configuration parameters for the application. Most are pulled in from system environment variables, which is a helpful way to access sensitive values (like API keys). This prevents us from accidentally checking them in to source control.</p>
<p>Now, we need our Authy production key (<a href="https://dashboard.authy.com/signup">sign up for Authy here</a>). When you create an Authy application, the production key is found on the dashboard:</p>
<p><img src="//s3.amazonaws.com/howtodocs/2fa-authy-dashboard.png" alt="Authy Dashboard"></p>
<p>Next, we need to jump over to the <code>User</code> model to configure the Authy client and create an instance method to send a one-time password.</p>
</div><div data-title="Create an Authy Client" data-file="models/User.js" data-highlight="3-7" class="step"><h2 id="create-an-authy-client">Create an Authy Client</h2>
<p>When the <code>User</code> CommonJS module is loaded, we create an instance of the Authy API client (using a production key) all instances of a <code>User</code> can share.  When we need to send or verify a one-time password, we&#39;ll use this single API client instance.</p>
<p>Now let&#39;s see where we use the client to send the one-time password necessary for our verification step.</p>
</div><div data-title="Send a Verification Token" data-file="models/User.js" data-highlight="73-101" class="step"><h2 id="send-a-verification-token">Send a Verification Token</h2>
<p>When it comes time to actually send the user a verification code, we do that in our model function here.</p>
<p>Before sending the code, an <a href="https://docs.authy.com/#section-Enabling_two-factor_on_a_user">Authy user</a> needs to exist as a pair for our <code>User</code> model in the database.  If the <code>authyId</code> for our user instance hasn&#39;t been set, we use the Authy API client to create an associated Authy user and store that ID in our database.</p>
<p>Once the user has an <code>authyId</code>, we can actually send a verification code to that user&#39;s mobile phone.</p>
<p>That&#39;s it for the model in this story - let&#39;s jump back to the controller to see where this model function is called.</p>
</div><div data-title="Sending a Token on Account Creation" data-file="controllers/users.js" data-highlight="37-47" class="step"><h2 id="sending-a-token-on-account-creation">Sending a Token on Account Creation</h2>
<p>When our user is created successfully via the form we implemented for the last story, we send a token to the user&#39;s mobile phone to verify their account in our controller.  When the code is sent, we redirect to another page where the user can enter the token they were sent, completing the verification process.</p>
<p>Let&#39;s check out the code for that next!</p>
</div><div data-title="Verify the Code" class="chapter"><div data-title="Verify the One-Time Password" data-file="views/users/verify.jade" data-language="jade" class="step"><h2>User Story: Verify the One-Time Password</h2><blockquote>As a user, I want to enter the one-time password sent to my mobile phone from the authentication system before I complete the signup process.</blockquote><p>This story covers the next user-facing step of the verification process, where they enter the code we sent them to verify their possession of the phone number they gave us. Here&#39;s what needs to get done to complete this story:</p>
<ul>
<li>Create a form to allow the user to enter the one-time password they were sent</li>
<li>Create routes and controllers to both display the form and handle the submission of the one-time password</li>
<li>Add an instance method to the <code>User</code> model to verify the one-time code that was entered using the Authy client</li>
</ul>
<p>The route definition in <code>controllers/router.js</code> is pretty much the same as the first story, so we&#39;ll skip that bit here. Let&#39;s begin instead with the verification form, which is created with the Jade code you see here.</p>
</div><div data-title="The Verification Form" data-file="views/users/verify.jade" data-highlight="13-18" data-language="jade" class="step"><h2 id="the-verification-form">The Verification Form</h2>
<p>This page actually has two forms, but we&#39;ll focus on the first one first. It has only a single field for the verification code, which we&#39;ll submit to the server for validation.</p>
</div><div data-title="Verifying the Code: Controller" data-file="controllers/users.js" data-highlight="95-147" class="step"><h2 id="verifying-the-code-controller">Verifying the Code: Controller</h2>
<p>This controller function handles the form submission. It&#39;s a little longer than the others, but it has a lot to do. It needs to:</p>
<ul>
<li>Load a <code>User</code> model for the current verification request</li>
<li>Use an instance function on the model object to verify the code that was entered by the user</li>
<li>If the code entered was valid, flip a boolean flag on the user model to indicate the account was verified</li>
</ul>
<p>Let&#39;s look at the <code>User</code> model to check out the instance method that handles verifying the code with Authy next.</p>
</div><div data-title="Verifying the Code: Model" data-file="models/User.js" data-highlight="103-109" class="step"><h2 id="verifying-the-code-model">Verifying the Code: Model</h2>
<p>This instance function is a thin wrapper around the Authy client function that sends in a candidate password to be verified. We call Authy, and then immediately call a passed callback function with the result.</p>
<p>That&#39;s all for this story! However, our verification form wouldn&#39;t be very usable if there wasn&#39;t a way to resend a verification code if the message didn&#39;t arrive at the end user&#39;s handset for whatever reason.  Let&#39;s tackle the user story to resend the code next.</p>
</div></div><div data-title="Resend the Code" class="chapter"><div data-title="Re-send the One-Time Password" data-file="views/users/verify.jade" data-language="jade" class="step"><h2>User Story: Re-send the One-Time Password</h2><blockquote>As a user, I want to click a link on the code verification page to re-send my code if I don't receive it on my phone.</blockquote><p>This story covers the case where an end user did not receive their verification code for some reason. Here&#39;s what needs to get done to complete this story:</p>
<ul>
<li>Create a form that requests that a new one-time password be sent to a user</li>
<li>Create a controller function to handle that form submission and re-send the code</li>
</ul>
<p>You might recall there were actually two forms on the Jade template we looked at earlier. Let&#39;s look at that second one now.</p>
</div><div data-title="Re-Send Code Form" data-file="views/users/verify.jade" data-highlight="20-22" data-language="jade" class="step"><h2 id="re-send-code-form">Re-send Code Form</h2>
<p>Here, we provide a form with no fields that submits a <code>POST</code> request to our back end, requesting that a new code be sent to the current user.</p>
<p>Let&#39;s look at the controller which handles this form next.</p>
</div><div data-title="Re-sending The Code" data-file="controllers/users.js" data-highlight="65-93" class="step"><h2 id="re-sending-the-code">Re-sending the Code</h2>
<p>This controller function loads the <code>User</code> model associated with the request and then uses the same instance function we defined earlier to resend the code. Pretty straightforward!</p>
<p>To wrap things up, let&#39;s implement our last user story where we confirm for the user that their account has been verified with a text message and a success page.</p>
</div></div><div data-title="Confirm Account Creation" class="chapter"><div data-title="Confirm Account Creation" data-file="controllers/users.js" class="step"><h2>User Story: Confirm Account Creation</h2><blockquote>As a user, I want to view a success page and receive a text message indicating that my account has been created successfully.</blockquote><p>This story completes the account verification use case by indicating to the user that their account has been created and verified successfully. To implement this story, we need to:</p>
<ul>
<li>Display a page that indicates that the user account has been created and verified successfully</li>
<li>Send a text message to the user&#39;s phone indicating their account has been verified</li>
</ul>
<p>Let&#39;s begin by looking at the controller.</p>
</div><div data-title="Show User Details Page" data-file="controllers/users.js" data-highlight="149-167" class="step"><h2 id="show-user-details-page">Show User Details Page</h2>
<p>This controller function renders a Jade template that contains the user&#39;s full name, and indicates whether or not they are verified by checking the user&#39;s <code>verified</code> property.</p>
<p>This should suffice for confirmation in the browser that the user has been verified. Let&#39;s see how we might send that text message next.</p>
</div><div data-title="Configuring Twilio" data-file="config.js" data-highlight="10-22" class="step"><h2 id="configuring-twilio">Configuring Twilio</h2>
<p>Authy is awesome for abstracting SMS and handling 2FA and account verification, but we can&#39;t use it to send arbitrary text messages. Let&#39;s use the Twilio API directly to do that!</p>
<p>But first, we need to configure out Twilio account. We&#39;ll need three things:</p>
<ul>
<li>Our Twilio account SID</li>
<li>Our Twilio auth token</li>
<li>A Twilio number in our account that can send text messages</li>
</ul>
<p>After including these values in our app&#39;s config file, we&#39;re ready to move into the <code>User</code> model and create an instance function to send a message to the user&#39;s phone.</p>
</div><div data-title="Sending a Message: Creating a Twilio Client" data-file="models/User.js" data-highlight="3-7" class="step"><h2 id="sending-a-message-creating-a-twilio-client">Sending a Message: Creating a Twilio Client</h2>
<p>Much as we did for our Authy client, we create a single instance of the Twilio REST API helper that all instances of our <code>User</code> model can use.</p>
</div><div data-title="Sending a Message: Using the Twilio Client" data-file="models/User.js" data-highlight="111-121" class="step"><h2 id="sending-a-message-using-the-twilio-client">Sending a Message: Using the Twilio Client</h2>
<p>Here, we add another instance function to the model that will send a text message to the user&#39;s configured phone number. Rather than just being a one-time password, this can be anything we wish.</p>
<p>Let&#39;s finish up in the controller, where we actually use this functionality.</p>
</div><div data-title="Sending a Message: Updating the Controller" data-file="controllers/users.js" data-highlight="121-140" class="step"><h2 id="sending-a-message-updating-the-controller">Sending a Message: Updating the Controller</h2>
<p>In the controller, after a new user has been successfully verified, we use <code>sendMessage</code> to deliver them the happy news! </p>
<h2 id="all-done">All Done</h2>
<p>And with that, we&#39;ve implemented account verification in our Node.js application! Be sure to check out the project buttons above to download the source for this application, view it on GitHub, or deploy it to Heroku to see it in action for yourself.</p>
<p>We&#39;d also love to hear your feedback on this tutorial - <a href="mailto:help@twilio.com">please reach out to us</a> with any questions you might have.  Thanks for checking out the tutorial!</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="models/User.js" data-mode="javascript">dmFyIG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTsKdmFyIGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdCcpOwp2YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7CgovLyBDcmVhdGUgYXV0aGVudGljYXRlZCBBdXRoeSBhbmQgVHdpbGlvIEFQSSBjbGllbnRzCnZhciBhdXRoeSA9IHJlcXVpcmUoJ2F1dGh5JykoY29uZmlnLmF1dGh5S2V5KTsKdmFyIHR3aWxpb0NsaWVudCA9IHJlcXVpcmUoJ3R3aWxpbycpKGNvbmZpZy5hY2NvdW50U2lkLCBjb25maWcuYXV0aFRva2VuKTsKCi8vIFVzZWQgdG8gZ2VuZXJhdGUgcGFzc3dvcmQgaGFzaAp2YXIgU0FMVF9XT1JLX0ZBQ1RPUiA9IDEwOwoKLy8gRGVmaW5lIHVzZXIgbW9kZWwgc2NoZW1hCnZhciBVc2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7CiAgICBmdWxsTmFtZTogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGNvdW50cnlDb2RlOiB7CiAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgcGhvbmU6IHsKICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB2ZXJpZmllZDogewogICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBhdXRoeUlkOiBTdHJpbmcsCiAgICBlbWFpbDogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICB1bmlxdWU6IHRydWUKICAgIH0sCiAgICBwYXNzd29yZDogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQp9KTsKCi8vIE1pZGRsZXdhcmUgZXhlY3V0ZWQgYmVmb3JlIHNhdmUgLSBoYXNoIHRoZSB1c2VyJ3MgcGFzc3dvcmQKVXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbihuZXh0KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgLy8gb25seSBoYXNoIHRoZSBwYXNzd29yZCBpZiBpdCBoYXMgYmVlbiBtb2RpZmllZCAob3IgaXMgbmV3KQogICAgaWYgKCFzZWxmLmlzTW9kaWZpZWQoJ3Bhc3N3b3JkJykpIHJldHVybiBuZXh0KCk7CgogICAgLy8gZ2VuZXJhdGUgYSBzYWx0CiAgICBiY3J5cHQuZ2VuU2FsdChTQUxUX1dPUktfRkFDVE9SLCBmdW5jdGlvbihlcnIsIHNhbHQpIHsKICAgICAgICBpZiAoZXJyKSByZXR1cm4gbmV4dChlcnIpOwoKICAgICAgICAvLyBoYXNoIHRoZSBwYXNzd29yZCB1c2luZyBvdXIgbmV3IHNhbHQKICAgICAgICBiY3J5cHQuaGFzaChzZWxmLnBhc3N3b3JkLCBzYWx0LCBmdW5jdGlvbihlcnIsIGhhc2gpIHsKICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIG5leHQoZXJyKTsKCiAgICAgICAgICAgIC8vIG92ZXJyaWRlIHRoZSBjbGVhcnRleHQgcGFzc3dvcmQgd2l0aCB0aGUgaGFzaGVkIG9uZQogICAgICAgICAgICBzZWxmLnBhc3N3b3JkID0gaGFzaDsKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgIH0pOwogICAgfSk7Cn0pOwoKLy8gVGVzdCBjYW5kaWRhdGUgcGFzc3dvcmQKVXNlclNjaGVtYS5tZXRob2RzLmNvbXBhcmVQYXNzd29yZCA9IGZ1bmN0aW9uKGNhbmRpZGF0ZVBhc3N3b3JkLCBjYikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgYmNyeXB0LmNvbXBhcmUoY2FuZGlkYXRlUGFzc3dvcmQsIHNlbGYucGFzc3dvcmQsIGZ1bmN0aW9uKGVyciwgaXNNYXRjaCkgewogICAgICAgIGlmIChlcnIpIHJldHVybiBjYihlcnIpOwogICAgICAgIGNiKG51bGwsIGlzTWF0Y2gpOwogICAgfSk7Cn07CgovLyBTZW5kIGEgdmVyaWZpY2F0aW9uIHRva2VuIHRvIHRoaXMgdXNlcgpVc2VyU2NoZW1hLm1ldGhvZHMuc2VuZEF1dGh5VG9rZW4gPSBmdW5jdGlvbihjYikgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIGlmICghc2VsZi5hdXRoeUlkKSB7CiAgICAgICAgLy8gUmVnaXN0ZXIgdGhpcyB1c2VyIGlmIGl0J3MgYSBuZXcgdXNlcgogICAgICAgIGF1dGh5LnJlZ2lzdGVyX3VzZXIoc2VsZi5lbWFpbCwgc2VsZi5waG9uZSwgc2VsZi5jb3VudHJ5Q29kZSwgCiAgICAgICAgICAgIGZ1bmN0aW9uKGVyciwgcmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoZXJyIHx8ICFyZXNwb25zZS51c2VyKSByZXR1cm4gY2IuY2FsbChzZWxmLCBlcnIpOwogICAgICAgICAgICBzZWxmLmF1dGh5SWQgPSByZXNwb25zZS51c2VyLmlkOwogICAgICAgICAgICBzZWxmLnNhdmUoZnVuY3Rpb24oZXJyLCBkb2MpIHsKICAgICAgICAgICAgICAgIGlmIChlcnIgfHwgIWRvYykgcmV0dXJuIGNiLmNhbGwoc2VsZiwgZXJyKTsKICAgICAgICAgICAgICAgIHNlbGYgPSBkb2M7CiAgICAgICAgICAgICAgICBzZW5kVG9rZW4oKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICAgIC8vIE90aGVyd2lzZSBzZW5kIHRva2VuIHRvIGEga25vd24gdXNlcgogICAgICAgIHNlbmRUb2tlbigpOwogICAgfQoKICAgIC8vIFdpdGggYSB2YWxpZCBBdXRoeSBJRCwgc2VuZCB0aGUgMkZBIHRva2VuIGZvciB0aGlzIHVzZXIKICAgIGZ1bmN0aW9uIHNlbmRUb2tlbigpIHsKICAgICAgICBhdXRoeS5yZXF1ZXN0X3NtcyhzZWxmLmF1dGh5SWQsIHRydWUsIGZ1bmN0aW9uKGVyciwgcmVzcG9uc2UpIHsKICAgICAgICAgICAgY2IuY2FsbChzZWxmLCBlcnIpOwogICAgICAgIH0pOwogICAgfQp9OwoKLy8gVGVzdCBhIDJGQSB0b2tlbgpVc2VyU2NoZW1hLm1ldGhvZHMudmVyaWZ5QXV0aHlUb2tlbiA9IGZ1bmN0aW9uKG90cCwgY2IpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIGF1dGh5LnZlcmlmeShzZWxmLmF1dGh5SWQsIG90cCwgZnVuY3Rpb24oZXJyLCByZXNwb25zZSkgewogICAgICAgIGNiLmNhbGwoc2VsZiwgZXJyLCByZXNwb25zZSk7CiAgICB9KTsKfTsKCi8vIFNlbmQgYSB0ZXh0IG1lc3NhZ2UgdmlhIHR3aWxpbyB0byB0aGlzIHVzZXIKVXNlclNjaGVtYS5tZXRob2RzLnNlbmRNZXNzYWdlID0gZnVuY3Rpb24obWVzc2FnZSwgY2IpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHR3aWxpb0NsaWVudC5zZW5kTWVzc2FnZSh7CiAgICAgICAgdG86IHNlbGYuY291bnRyeUNvZGUrc2VsZi5waG9uZSwKICAgICAgICBmcm9tOiBjb25maWcudHdpbGlvTnVtYmVyLAogICAgICAgIGJvZHk6IG1lc3NhZ2UKICAgIH0sIGZ1bmN0aW9uKGVyciwgcmVzcG9uc2UpIHsKICAgICAgICBjYi5jYWxsKHNlbGYsIGVycik7CiAgICB9KTsKfTsKCi8vIEV4cG9ydCB1c2VyIG1vZGVsCm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCBVc2VyU2NoZW1hKTs=</textarea>
<textarea class="saurus-file" data-file="controllers/router.js" data-mode="javascript">dmFyIGhvbWUgPSByZXF1aXJlKCcuL2hvbWUnKTsKdmFyIHVzZXJzID0gcmVxdWlyZSgnLi91c2VycycpOwoKLy8gTWFwIHJvdXRlcyB0byBjb250cm9sbGVyIGZ1bmN0aW9ucwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGFwcCkgewogICAgLy8gUmVuZGVyIGhvbWUgcGFnZQogICAgYXBwLmdldCgnLycsIGhvbWUuc2hvdyk7CgogICAgLy8gUm91dGVzIGZvciBhY2NvdW50IGNyZWF0aW9uCiAgICBhcHAuZ2V0KCcvdXNlcnMvbmV3JywgdXNlcnMuc2hvd0NyZWF0ZSk7CiAgICBhcHAucG9zdCgnL3VzZXJzJywgdXNlcnMuY3JlYXRlKTsKICAgIGFwcC5nZXQoJy91c2Vycy86aWQvdmVyaWZ5JywgdXNlcnMuc2hvd1ZlcmlmeSk7CiAgICBhcHAucG9zdCgnL3VzZXJzLzppZC92ZXJpZnknLCB1c2Vycy52ZXJpZnkpOwogICAgYXBwLnBvc3QoJy91c2Vycy86aWQvcmVzZW5kJywgdXNlcnMucmVzZW5kKTsKICAgIGFwcC5nZXQoJy91c2Vycy86aWQnLCB1c2Vycy5zaG93VXNlcik7Cn07</textarea>
<textarea class="saurus-file" data-file="controllers/users.js" data-mode="javascript">dmFyIFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvVXNlcicpOwoKLy8gRGlzcGxheSBhIGZvcm0gdGhhdCBhbGxvd3MgdXNlcnMgdG8gc2lnbiB1cCBmb3IgYSBuZXcgYWNjb3VudApleHBvcnRzLnNob3dDcmVhdGUgPSBmdW5jdGlvbihyZXF1ZXN0LCByZXNwb25zZSkgewogICAgcmVzcG9uc2UucmVuZGVyKCd1c2Vycy9jcmVhdGUnLCB7CiAgICAgICAgdGl0bGU6ICdDcmVhdGUgVXNlciBBY2NvdW50JywKICAgICAgICAvLyBpbmNsdWRlIGFueSBlcnJvcnMgKHN1Y2Nlc3MgbWVzc2FnZXMgbm90IHBvc3NpYmxlIGZvciB2aWV3KQogICAgICAgIGVycm9yczogcmVxdWVzdC5mbGFzaCgnZXJyb3JzJykKICAgIH0pOwp9OwoKLy8gY3JlYXRlIGEgbmV3IHVzZXIgYmFzZWQgb24gdGhlIGZvcm0gc3VibWlzc2lvbgpleHBvcnRzLmNyZWF0ZSA9IGZ1bmN0aW9uKHJlcXVlc3QsIHJlc3BvbnNlKSB7CiAgICB2YXIgcGFyYW1zID0gcmVxdWVzdC5ib2R5OwogICAgCiAgICAvLyBDcmVhdGUgYSBuZXcgdXNlciBiYXNlZCBvbiBmb3JtIHBhcmFtZXRlcnMKICAgIHZhciB1c2VyID0gbmV3IFVzZXIoewogICAgICAgIGZ1bGxOYW1lOiBwYXJhbXMuZnVsbE5hbWUsCiAgICAgICAgZW1haWw6IHBhcmFtcy5lbWFpbCwKICAgICAgICBwaG9uZTogcGFyYW1zLnBob25lLAogICAgICAgIGNvdW50cnlDb2RlOiBwYXJhbXMuY291bnRyeUNvZGUsCiAgICAgICAgcGFzc3dvcmQ6IHBhcmFtcy5wYXNzd29yZAogICAgfSk7CgogICAgdXNlci5zYXZlKGZ1bmN0aW9uKGVyciwgZG9jKSB7CiAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAvLyBUbyBpbXByb3ZlIG9uIHRoaXMgZXhhbXBsZSwgeW91IHNob3VsZCBpbmNsdWRlIGEgYmV0dGVyCiAgICAgICAgICAgIC8vIGVycm9yIG1lc3NhZ2UsIGVzcGVjaWFsbHkgYXJvdW5kIGZvcm0gZmllbGQgdmFsaWRhdGlvbi4gQnV0CiAgICAgICAgICAgIC8vIGZvciBub3csIGp1c3QgaW5kaWNhdGUgdGhhdCB0aGUgc2F2ZSBvcGVyYXRpb24gZmFpbGVkCiAgICAgICAgICAgIHJlcXVlc3QuZmxhc2goJ2Vycm9ycycsICdUaGVyZSB3YXMgYSBwcm9ibGVtIGNyZWF0aW5nIHlvdXInCiAgICAgICAgICAgICAgICArICcgYWNjb3VudCAtIG5vdGUgdGhhdCBhbGwgZmllbGRzIGFyZSByZXF1aXJlZC4gUGxlYXNlJwogICAgICAgICAgICAgICAgKyAnIGRvdWJsZS1jaGVjayB5b3VyIGlucHV0IGFuZCB0cnkgYWdhaW4uJyk7CgogICAgICAgICAgICByZXNwb25zZS5yZWRpcmVjdCgnL3VzZXJzL25ldycpOwoKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBpcyBjcmVhdGVkIHN1Y2Nlc3NmdWxseSwgc2VuZCB0aGVtIGFuIGFjY291bnQKICAgICAgICAgICAgLy8gdmVyaWZpY2F0aW9uIHRva2VuCiAgICAgICAgICAgIHVzZXIuc2VuZEF1dGh5VG9rZW4oZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5mbGFzaCgnZXJyb3JzJywgJ1RoZXJlIHdhcyBhIHByb2JsZW0gc2VuZGluZyAnCiAgICAgICAgICAgICAgICAgICAgICAgICsgJ3lvdXIgdG9rZW4gLSBzb3JyeSA6KCcpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFNlbmQgdG8gdG9rZW4gdmVyaWZpY2F0aW9uIHBhZ2UKICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlZGlyZWN0KCcvdXNlcnMvJytkb2MuX2lkKycvdmVyaWZ5Jyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0pOwp9OwoKLy8gRGlzcGxheSBhIGZvcm0gdGhhdCBhbGxvd3MgdXNlcnMgdG8gZW50ZXIgYSB2ZXJpZmljYXRpb24gdG9rZW4KZXhwb3J0cy5zaG93VmVyaWZ5ID0gZnVuY3Rpb24ocmVxdWVzdCwgcmVzcG9uc2UpIHsKICAgIHJlc3BvbnNlLnJlbmRlcigndXNlcnMvdmVyaWZ5JywgewogICAgICAgIHRpdGxlOiAnVmVyaWZ5IFBob25lIE51bWJlcicsCiAgICAgICAgLy8gaW5jbHVkZSBhbnkgZXJyb3JzCiAgICAgICAgZXJyb3JzOiByZXF1ZXN0LmZsYXNoKCdlcnJvcnMnKSwKICAgICAgICAvLyBzdWNjZXNzIG1lc3NzYWdlcwogICAgICAgIHN1Y2Nlc3NlczogcmVxdWVzdC5mbGFzaCgnc3VjY2Vzc2VzJyksCiAgICAgICAgLy8gSW5jbHVkZSBkYXRhYmFzZSBJRCB0byBpbmNsdWRlIGluIGZvcm0gUE9TVCBhY3Rpb24KICAgICAgICBpZDogcmVxdWVzdC5wYXJhbXMuaWQKICAgIH0pOwp9OwoKLy8gUmVzZW5kIGEgY29kZSBpZiBpdCB3YXMgbm90IHJlY2VpdmVkCmV4cG9ydHMucmVzZW5kID0gZnVuY3Rpb24ocmVxdWVzdCwgcmVzcG9uc2UpIHsKICAgIC8vIExvYWQgdXNlciBtb2RlbAogICAgVXNlci5maW5kQnlJZChyZXF1ZXN0LnBhcmFtcy5pZCwgZnVuY3Rpb24oZXJyLCB1c2VyKSB7CiAgICAgICAgaWYgKGVyciB8fCAhdXNlcikgewogICAgICAgICAgICByZXR1cm4gZGllKCdVc2VyIG5vdCBmb3VuZCBmb3IgdGhpcyBJRC4nKTsKICAgICAgICB9CgogICAgICAgIC8vIElmIHdlIGZpbmQgdGhlIHVzZXIsIGxldCdzIHNlbmQgdGhlbSBhIG5ldyBjb2RlCiAgICAgICAgdXNlci5zZW5kQXV0aHlUb2tlbihwb3N0U2VuZCk7CiAgICB9KTsKCiAgICAvLyBIYW5kbGUgc2VuZCBjb2RlIHJlc3BvbnNlCiAgICBmdW5jdGlvbiBwb3N0U2VuZChlcnIpIHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgIHJldHVybiBkaWUoJ1RoZXJlIHdhcyBhIHByb2JsZW0gc2VuZGluZyB5b3UgdGhlIGNvZGUgLSBwbGVhc2UgJwogICAgICAgICAgICAgICAgKyAncmV0cnkuJyk7CiAgICAgICAgfQoKICAgICAgICByZXF1ZXN0LmZsYXNoKCdzdWNjZXNzZXMnLCAnQ29kZSByZS1zZW50IScpOwogICAgICAgIHJlc3BvbnNlLnJlZGlyZWN0KCcvdXNlcnMvJytyZXF1ZXN0LnBhcmFtcy5pZCsnL3ZlcmlmeScpOwogICAgfQoKICAgIC8vIHJlc3BvbmQgd2l0aCBhbiBlcnJvcgogICAgZnVuY3Rpb24gZGllKG1lc3NhZ2UpIHsKICAgICAgICByZXF1ZXN0LmZsYXNoKCdlcnJvcnMnLCBtZXNzYWdlKTsKICAgICAgICByZXNwb25zZS5yZWRpcmVjdCgnL3VzZXJzLycrcmVxdWVzdC5wYXJhbXMuaWQrJy92ZXJpZnknKTsKICAgIH0KfTsKCi8vIEhhbmRsZSBzdWJtaXNzaW9uIG9mIHZlcmlmaWNhdGlvbiB0b2tlbgpleHBvcnRzLnZlcmlmeSA9IGZ1bmN0aW9uKHJlcXVlc3QsIHJlc3BvbnNlKSB7CiAgICB2YXIgdXNlcjsKCiAgICAvLyBMb2FkIHVzZXIgbW9kZWwKICAgIFVzZXIuZmluZEJ5SWQocmVxdWVzdC5wYXJhbXMuaWQsIGZ1bmN0aW9uKGVyciwgZG9jKSB7CiAgICAgICAgaWYgKGVyciB8fCAhZG9jKSB7CiAgICAgICAgICAgIHJldHVybiBkaWUoJ1VzZXIgbm90IGZvdW5kIGZvciB0aGlzIElELicpOwogICAgICAgIH0KCiAgICAgICAgLy8gSWYgd2UgZmluZCB0aGUgdXNlciwgbGV0J3MgdmFsaWRhdGUgdGhlIHRva2VuIHRoZXkgZW50ZXJlZAogICAgICAgIHVzZXIgPSBkb2M7CiAgICAgICAgdXNlci52ZXJpZnlBdXRoeVRva2VuKHJlcXVlc3QuYm9keS5jb2RlLCBwb3N0VmVyaWZ5KTsKICAgIH0pOwoKICAgIC8vIEhhbmRsZSB2ZXJpZmljYXRpb24gcmVzcG9uc2UKICAgIGZ1bmN0aW9uIHBvc3RWZXJpZnkoZXJyKSB7CiAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICByZXR1cm4gZGllKCdUaGUgdG9rZW4geW91IGVudGVyZWQgd2FzIGludmFsaWQgLSBwbGVhc2UgcmV0cnkuJyk7CiAgICAgICAgfQoKICAgICAgICAvLyBJZiB0aGUgdG9rZW4gd2FzIHZhbGlkLCBmbGlwIHRoZSBiaXQgdG8gdmFsaWRhdGUgdGhlIHVzZXIgYWNjb3VudAogICAgICAgIHVzZXIudmVyaWZpZWQgPSB0cnVlOwogICAgICAgIHVzZXIuc2F2ZShwb3N0U2F2ZSk7CiAgICB9CgogICAgLy8gYWZ0ZXIgd2Ugc2F2ZSB0aGUgdXNlciwgaGFuZGxlIHNlbmRpbmcgYSBjb25maXJtYXRpb24KICAgIGZ1bmN0aW9uIHBvc3RTYXZlKGVycikgewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgcmV0dXJuIGRpZSgnVGhlcmUgd2FzIGEgcHJvYmxlbSB2YWxpZGF0aW5nIHlvdXIgYWNjb3VudCAnCiAgICAgICAgICAgICAgICArICctIHBsZWFzZSBlbnRlciB5b3VyIHRva2VuIGFnYWluLicpOwogICAgICAgIH0KCiAgICAgICAgLy8gU2VuZCBjb25maXJtYXRpb24gdGV4dCBtZXNzYWdlCiAgICAgICAgdmFyIG1lc3NhZ2UgPSAnWW91IGRpZCBpdCEgU2lnbnVwIGNvbXBsZXRlIDopJzsKICAgICAgICB1c2VyLnNlbmRNZXNzYWdlKG1lc3NhZ2UsIGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICByZXF1ZXN0LmZsYXNoKCdlcnJvcnMnLCAnWW91IGFyZSBzaWduZWQgdXAsIGJ1dCAnCiAgICAgICAgICAgICAgICAgICAgKyAnd2UgY291bGQgbm90IHNlbmQgeW91IGEgbWVzc2FnZS4gT3VyIGJhZCA6KCcpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBzaG93IHN1Y2Nlc3MgcGFnZQogICAgICAgICAgICByZXF1ZXN0LmZsYXNoKCdzdWNjZXNzZXMnLCBtZXNzYWdlKTsKICAgICAgICAgICAgcmVzcG9uc2UucmVkaXJlY3QoJy91c2Vycy8nK3VzZXIuX2lkKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLyByZXNwb25kIHdpdGggYW4gZXJyb3IKICAgIGZ1bmN0aW9uIGRpZShtZXNzYWdlKSB7CiAgICAgICAgcmVxdWVzdC5mbGFzaCgnZXJyb3JzJywgbWVzc2FnZSk7CiAgICAgICAgcmVzcG9uc2UucmVkaXJlY3QoJy91c2Vycy8nK3JlcXVlc3QucGFyYW1zLmlkKycvdmVyaWZ5Jyk7CiAgICB9Cn07CgovLyBTaG93IGRldGFpbHMgYWJvdXQgdGhlIHVzZXIKZXhwb3J0cy5zaG93VXNlciA9IGZ1bmN0aW9uKHJlcXVlc3QsIHJlc3BvbnNlLCBuZXh0KSB7CiAgICAvLyBMb2FkIHVzZXIgbW9kZWwKICAgIFVzZXIuZmluZEJ5SWQocmVxdWVzdC5wYXJhbXMuaWQsIGZ1bmN0aW9uKGVyciwgdXNlcikgewogICAgICAgIGlmIChlcnIgfHwgIXVzZXIpIHsKICAgICAgICAgICAgLy8gNDA0CiAgICAgICAgICAgIHJldHVybiBuZXh0KCk7CiAgICAgICAgfQoKICAgICAgICByZXNwb25zZS5yZW5kZXIoJ3VzZXJzL3Nob3cnLCB7CiAgICAgICAgICAgIHRpdGxlOiAnSGkgdGhlcmUgJyArIHVzZXIuZnVsbE5hbWUgKyAnIScsCiAgICAgICAgICAgIHVzZXI6IHVzZXIsCiAgICAgICAgICAgIC8vIGFueSBlcnJvcnMKICAgICAgICAgICAgZXJyb3JzOiByZXF1ZXN0LmZsYXNoKCdlcnJvcnMnKSwKICAgICAgICAgICAgLy8gYW55IHN1Y2Nlc3MgbWVzc2FnZXMKICAgICAgICAgICAgc3VjY2Vzc2VzOiByZXF1ZXN0LmZsYXNoKCdzdWNjZXNzZXMnKQogICAgICAgIH0pOwogICAgfSk7Cn07Cg==</textarea>
<textarea class="saurus-file" data-file="views/users/create.jade" data-mode="jade">ZXh0ZW5kcyAuLi9sYXlvdXQKCmJsb2NrIHN0eWxlcwogIGxpbmsocmVsPSdzdHlsZXNoZWV0JywgbWVkaWE9J3NjcmVlbicKICAgIGhyZWY9Jy8vd3d3LmF1dGh5LmNvbS9mb3JtLmF1dGh5Lm1pbi5jc3MnKQoKYmxvY2sgY29udGVudAogIGgxIFdlJ3JlIEdvaW5nIFRvIEJlICpCRVNUKiBGcmllbmRzCiAgcC4KICAgIFRoYW5rIHlvdSBmb3IgeW91ciBpbnRlcmVzdCBpbiBzaWduaW5nIHVwISBDYW4geW91IHRlbGwgdXMgYSBiaXQgYWJvdXQgCiAgICB5b3Vyc2VsZj8KCiAgZm9ybShhY3Rpb249Jy91c2VycycsIG1ldGhvZD0nUE9TVCcpCiAgICAuZm9ybS1ncm91cAogICAgICBsYWJlbChmb3I9J2Z1bGxOYW1lJykgWW91ciBGdWxsIE5hbWU6CiAgICAgIGlucHV0LmZvcm0tY29udHJvbCh0eXBlPSd0ZXh0JywgbmFtZT0nZnVsbE5hbWUnLCAKICAgICAgICBwbGFjZWhvbGRlcj0nUGVnZ3kgQ2FydGVyJykKCiAgICAuZm9ybS1ncm91cAogICAgICBsYWJlbChmb3I9J2VtYWlsJykgWW91ciBFLU1haWwgQWRkcmVzczoKICAgICAgaW5wdXQuZm9ybS1jb250cm9sKHR5cGU9J2VtYWlsJywgbmFtZT0nZW1haWwnLCAKICAgICAgICBwbGFjZWhvbGRlcj0ncGNhcnRlckBzc3IuZ292JykKCiAgICAuZm9ybS1ncm91cAogICAgICBsYWJlbChmb3I9J3Bhc3N3b3JkJykgWW91ciBQYXNzd29yZDoKICAgICAgaW5wdXQuZm9ybS1jb250cm9sKHR5cGU9J3Bhc3N3b3JkJywgbmFtZT0ncGFzc3dvcmQnKQoKICAgIC5mb3JtLWdyb3VwCiAgICAgIGxhYmVsKGZvcj0nY291bnRyeUNvZGUnKSBDb3VudHJ5IENvZGU6CiAgICAgIHNlbGVjdChpZD0nYXV0aHktY291bnRyaWVzJywgbmFtZT0nY291bnRyeUNvZGUnKQoKICAgIC5mb3JtLWdyb3VwCiAgICAgIGxhYmVsKGZvcj0ncGhvbmUnKSBNb2JpbGUgUGhvbmU6CiAgICAgIGlucHV0LmZvcm0tY29udHJvbCh0eXBlPSd0ZXh0JywgbmFtZT0ncGhvbmUnLCBwbGFjZWhvbGRlcj0nNjUxLTg2Ny01MzA5JykKCiAgICBidXR0b24uYnRuLmJ0bi1wcmltYXJ5KHR5cGU9J3N1Ym1pdCcpIENyZWF0ZSBBY2NvdW50CgpibG9jayBzY3JpcHRzCiAgLy8gSW5jbHVkZSBBdXRoeSBmb3JtIGhlbHBlcnMgYW5kIGFkZGl0aW9uYWwgaGVscGVyIHNjcmlwdAogIHNjcmlwdChzcmM9Jy8vd3d3LmF1dGh5LmNvbS9mb3JtLmF1dGh5Lm1pbi5qcycpCiAgc2NyaXB0KHNyYz0nL2pzL2NyZWF0ZV9mb3JtLmpzJyk=</textarea>
<textarea class="saurus-file" data-file="config.js" data-mode="javascript">dmFyIGNmZyA9IHt9OwoKLy8gSFRUUCBQb3J0IHRvIHJ1biBvdXIgd2ViIGFwcGxpY2F0aW9uCmNmZy5wb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwOwoKLy8gQSByYW5kb20gc3RyaW5nIHRoYXQgd2lsbCBoZWxwIGdlbmVyYXRlIHNlY3VyZSBvbmUtdGltZSBwYXNzd29yZHMgYW5kCi8vIEhUVFAgc2Vzc2lvbnMKY2ZnLnNlY3JldCA9IHByb2Nlc3MuZW52LkFQUF9TRUNSRVQgfHwgJ2tleWJvYXJkIGNhdCc7CgovLyBZb3VyIFR3aWxpbyBhY2NvdW50IFNJRCBhbmQgYXV0aCB0b2tlbiwgYm90aCBmb3VuZCBhdDoKLy8gaHR0cHM6Ly93d3cudHdpbGlvLmNvbS91c2VyL2FjY291bnQKLy8gCi8vIEEgZ29vZCBwcmFjdGljZSBpcyB0byBzdG9yZSB0aGVzZSBzdHJpbmcgdmFsdWVzIGFzIHN5c3RlbSBlbnZpcm9ubWVudAovLyB2YXJpYWJsZXMsIGFuZCBsb2FkIHRoZW0gZnJvbSB0aGVyZSBhcyB3ZSBhcmUgZG9pbmcgYmVsb3cuIEFsdGVybmF0ZWx5LAovLyB5b3UgY291bGQgaGFyZCBjb2RlIHRoZXNlIHZhbHVlcyBoZXJlIGFzIHN0cmluZ3MuCmNmZy5hY2NvdW50U2lkID0gcHJvY2Vzcy5lbnYuVFdJTElPX0FDQ09VTlRfU0lEOwpjZmcuYXV0aFRva2VuID0gcHJvY2Vzcy5lbnYuVFdJTElPX0FVVEhfVE9LRU47CgovLyBBIFR3aWxpbyBudW1iZXIgeW91IGNvbnRyb2wgLSBjaG9vc2Ugb25lIGZyb206Ci8vIGh0dHBzOi8vd3d3LnR3aWxpby5jb20vdXNlci9hY2NvdW50L3Bob25lLW51bWJlcnMvaW5jb21pbmcKLy8gU3BlY2lmeSBpbiBFLjE2NCBmb3JtYXQsIGUuZy4gIisxNjUxOTk5ODg3NyIKY2ZnLnR3aWxpb051bWJlciA9IHByb2Nlc3MuZW52LlRXSUxJT19OVU1CRVI7CgovLyBZb3VyIEF1dGh5IHByb2R1Y3Rpb24ga2V5IC0gdGhpcyBjYW4gYmUgZm91bmQgb24gdGhlIGRhc2hib2FyZCBmb3IgeW91ciAKLy8gQXV0aHkgYXBwbGljYXRpb24KY2ZnLmF1dGh5S2V5ID0gcHJvY2Vzcy5lbnYuQVVUSFlfQVBJX0tFWTsKCi8vIE1vbmdvREIgY29ubmVjdGlvbiBzdHJpbmcgLSBNT05HT19VUkwgaXMgZm9yIGxvY2FsIGRldiwKLy8gTU9OR09MQUJfVVJJIGlzIGZvciB0aGUgTW9uZ29MYWIgYWRkLW9uIGZvciBIZXJva3UgZGVwbG95bWVudApjZmcubW9uZ29VcmwgPSBwcm9jZXNzLmVudi5NT05HT0xBQl9VUkkgfHwgcHJvY2Vzcy5lbnYuTU9OR09fVVJMOwoKLy8gRXhwb3J0IGNvbmZpZ3VyYXRpb24gb2JqZWN0Cm1vZHVsZS5leHBvcnRzID0gY2ZnOw==</textarea>
<textarea class="saurus-file" data-file="views/users/verify.jade" data-mode="jade">ZXh0ZW5kcyAuLi9sYXlvdXQKCmJsb2NrIHN0eWxlcwogIGxpbmsocmVsPSdzdHlsZXNoZWV0JywgaHJlZj0nL2Nzcy92ZXJpZnkuY3NzJykKCmJsb2NrIGNvbnRlbnQKICBoMSBKdXN0IFRvIEJlIFNhZmUuLi4KICBwLgogICAgWW91ciBhY2NvdW50IGhhcyBiZWVuIGNyZWF0ZWQsIGJ1dCB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB5b3UncmUgYSBodW1hbgogICAgaW4gY29udHJvbCBvZiB0aGUgcGhvbmUgbnVtYmVyIHlvdSBnYXZlIHVzLiBDYW4geW91IHBsZWFzZSBlbnRlciB0aGUgCiAgICB2ZXJpZmljYXRpb24gY29kZSB3ZSBqdXN0IHNlbnQgdG8geW91ciBwaG9uZT8KCiAgZm9ybShhY3Rpb249Jy91c2Vycy8nK2lkKycvdmVyaWZ5JywgbWV0aG9kPSdQT1NUJykKICAgIC5mb3JtLWdyb3VwCiAgICAgIGxhYmVsKGZvcj0nY29kZScpIFZlcmlmaWNhdGlvbiBDb2RlOgogICAgICBpbnB1dC5mb3JtLWNvbnRyb2wodHlwZT0ndGV4dCcsIG5hbWU9J2NvZGUnKQoKICAgIGJ1dHRvbi5idG4uYnRuLXByaW1hcnkodHlwZT0nc3VibWl0JykgVmVyaWZ5IFRva2VuCgogIGZvcm0oYWN0aW9uPScvdXNlcnMvJytpZCsnL3Jlc2VuZCcsIG1ldGhvZD0nUE9TVCcpCiAgICAuZm9ybS1ncm91cAogICAgICBidXR0b24uYnRuLmJ0bi1saW5rKHR5cGU9J3N1Ym1pdCcpIFJlc2VuZCBNeSBDb2Rl</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/account-verification-node" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>